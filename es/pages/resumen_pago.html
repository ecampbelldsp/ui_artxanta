<!doctype html>
<html>
<head>
	<link href='https://fonts.googleapis.com/css?family=DM Sans' rel='stylesheet'>
	<meta charset="utf-8">
	<title>Pasarela de pago</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style_2.css">
  <link rel="stylesheet" href="assets/fontawesome-free-6.4.0-web/css/all.css">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.7.12/sweetalert2.all.js" integrity="sha512-7TfWz/1TEVLE2pG8KLC/suq4qgXocI+/sNKfX0yifGXBbSKPoA9wcQ2GDublV7SSCu90vnW1q7+TUXOYaCIshA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   <script src="js/api_request.js"></script>

</head>
<body oncontextmenu="return false" style="background: #EBEBEB;justify-content:center;display:flex;margin:0px; font-family: 'DM Sans';zoom:150%;">
    <div style="width:70%;position:absolute;text-align:center;margin-top:20px;user-select:none;font-size:14px">
      <!-- <h3 style="display:inline-block;font-size:18px; margin-right:50px">Pasos <br>Check-In:</h3> -->
      <div style="display:inline-block; color:#cb30ad;">1<br>Reserva</div>
      <div style="width:5%;display:inline-block;border-bottom:1px dotted #cb30ad;vertical-align:super;"></div>
      <div style="display:inline-block; color:#cb30ad;">2<br>Identificación</div>
      <div style="width:5%;display:inline-block;border-bottom:1px dotted #cb30ad;vertical-align:super;"></div>
      <div style="display:inline-block;font-size:18px;font-weight:800; color:#cb30ad;">3<br>Pago</div>
      <div style="width:5%;display:inline-block;border-bottom:1px dotted black;vertical-align:super;"></div>
      <div style="display:inline-block">4<br>Factura</div>
      <div style="width:5%;display:inline-block;border-bottom:1px dotted black;vertical-align:super;"></div>
      <div style="display:inline-block">5<br>Llave</div>
    </div>
	<audio  id="audio" autoplay src="Audios/8.-.mp3"  type="audio/mpeg"> </audio>
	
	

	<p class="fundir" style="font-weight: bold; font-size: 24px; position: absolute;bottom:35px;right:214px;opacity:0;color:#333333" translate="no"> Powered by: </p>
	<img src="image/logo.png" alt="logo" class=" fundir" style=" position: absolute;bottom:0px;right:0px; height:180px;opacity:0;">
	
	
	<span style="position: absolute;margin-top: 25vh;margin-left: -100%;" class="dot"></span>

	<div class="fundir" style=" border-radius: 25px;background-color:white;height:800px; width: 500px;margin-top: 8vh;opacity:0;display:block;text-align:center;padding:60px">
		<p style="font-family: 'DM Sans'; font-weight: bold; font-size: 50px; color: #6B43F1;margin:3px"> Pago </p>
	
		<br>
		
		<p id="totalmoney_label" style="white-space: pre-line;padding: 10px;  font-family: 'DM Sans'; font-size: 26px; color: #AAAAAA ; border-radius: 25px"> <strong> Importe total</strong></p> 		
		<p id="totalmoney" style="white-space: pre-line; padding: 10px; width: 100%; font-family: 'DM Sans'; font-size: 20px; background-color: #E3E0E0; color: #AAAAAA;  border-radius: 25px"> Calculando ... </p> 
				
		<p id="pagado_label" style="white-space: pre-line;padding: 10px;font-family: 'DM Sans'; font-size: 26px; color: #AAAAAA ; border-radius: 25px"> <strong>Pagado</strong> </p> 		
		<p id="pagado" style="white-space: pre-line; padding: 10px; width: 100%;  font-family: 'DM Sans'; font-size: 20px; background-color: #E3E0E0; color: #AAAAAA;  border-radius: 25px">  </p>
		
		
			
		<p id="deuda_label" style="white-space: pre-line;padding: 10px;  font-family: 'DM Sans'; font-size: 26px; color: #AAAAAA ; border-radius: 25px">  <strong> Importe pendiente</strong> </p> 		
		<p id="deuda" style="white-space: pre-line; padding: 10px; width: 100%; font-family: 'DM Sans'; font-size: 20px; background-color: #E3E0E0; color: #AAAAAA;  border-radius: 25px">  </p> 

		
		<input type="button" class="custom-btn  btn-16" style= "width: 150px; height: 50px; font-size: 30px;padding: 0px;margin-top:60px" value="Pagar" onclick="call_makePayment();">
	</div>
</body>
	
	<script>
		$(window).load(function(){
			$(".fundir").animate({opacity:"1"});
		})
	
		postGuest_jsonPago = JSON.parse(localStorage.postGuest);
		
		console.log("Prueba pago ",postGuest_jsonPago);
		
		let response_gmail = fetchAsync_sendGmail()


		
		postGuest_jsonPago = JSON.parse(localStorage.postGuest);

		
		
		var totalmoney = document.getElementById('totalmoney');
		var pagado = document.getElementById('pagado');
		var deuda = document.getElementById('deuda');

		totalmoney.textContent = postGuest_jsonPago.total + " €";
		pagado.textContent += postGuest_jsonPago.paid + " €";
		deuda.textContent += postGuest_jsonPago.balance + " €";
		
		console.log("Pagado ",postGuest_jsonPago.paid);
		console.log("postGuest_jsonPago ",postGuest_jsonPago);

		var body = '{"reservationID": "","checkIn": "","checkOut": "","roomType": "","roomPrice": "","guestName": "","guestAddress": "","guestDocument": "","invoiceNumber": "","amount": "","cardType": "","cardNumber": "","cardCVV": "","cardExpire": ""}';
		
		body = JSON.parse(body);

		body.reservationID = postGuest_jsonPago.reservationID;
		body.checkIn = postGuest_jsonPago.startDate;
		body.checkOut = postGuest_jsonPago.endDate;
		body.roomType = postGuest_jsonPago.roomType;
		body.roomPrice = postGuest_jsonPago.roomPicked_price;
		body.guestName = postGuest_jsonPago.guestFirstName + " " + postGuest_jsonPago.guestLastName;
		body.guestDocument = postGuest_jsonPago.guestDocumentType;
		body.amount  = postGuest_jsonPago.balance;

		function call_makePayment(){ 
		//flag = makePayment(url, body);
		window.location.href='pago.html'
		}


	</script>
</html>
