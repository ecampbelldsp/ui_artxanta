<!doctype html>
<html>
<head>
	<link href='https://fonts.googleapis.com/css?family=DM Sans' rel='stylesheet'>
	<meta charset="utf-8">
	<title>Pasarela de pago</title>
	<link href="./css/style.css" rel="stylesheet" type="text/css">
	<script src="js/api_request.js"></script>

</head>

<body style="background: #EBEBEB;zoom:150%">
	
	<p style="font-weight: bold; font-family: 'DM Sans'; font-size: 24px; position: absolute; top:90%; right: 25.5%;"> Powered by: </p>
	<img src="image/logo.png" alt="logo" class="logo" style="position: absolute; top:86.2%; right: 2%; width: 240px; height: 150px">
	<span style="position: absolute; top:10%; left:-20%;z-index:-2;" class="dot"></span>


	<p style="font-family: 'DM Sans'; font-weight: bold; font-size: 50px; position: absolute; top:8%; left: 44.5%; color: #6B43F1"> Pago </p>
	<svg  width="460px" height="700px" style="position: absolute; top:10%; left: 25%; z-index:-1; border-radius: 25px">
		<rect width="460px" height="700px" style="fill:white;stroke-width:3;stroke:white; fill-opacity=1" />   	
	</svg>
	
	<br>
	
	<p id="totalmoney_label" style="white-space: pre-line;padding: 10px; position:absolute; left: 42.5%; top: 20.5%; font-family: 'DM Sans'; font-size: 26px; color: #AAAAAA ; border-radius: 25px"> <strong> Importe total</strong></p> 		
	<p id="totalmoney" style="white-space: pre-line; padding: 10px; width: 20%; position:absolute; left: 42.5%; top: 28%; font-family: 'DM Sans'; font-size: 20px; background-color: #E3E0E0; color: #AAAAAA;  border-radius: 25px"> Calculando ... </p> 
			
	<p id="pagado_label" style="white-space: pre-line;padding: 10px; position:absolute; left: 42.5%; top: 33%; font-family: 'DM Sans'; font-size: 26px; color: #AAAAAA ; border-radius: 25px"> <strong>Pagado</strong> </p> 		
	<p id="pagado" style="white-space: pre-line; padding: 10px; width: 20%; position:absolute; left: 42.5%; top: 40%; font-family: 'DM Sans'; font-size: 20px; background-color: #E3E0E0; color: #AAAAAA;  border-radius: 25px">  </p>
	
	
		
	<p id="deuda_label" style="white-space: pre-line;padding: 10px; position:absolute; left: 42.5%; top: 45%; font-family: 'DM Sans'; font-size: 26px; color: #AAAAAA ; border-radius: 25px">  <strong> Deuda</strong> </p> 		
	<p id="deuda" style="white-space: pre-line; padding: 10px; width: 20%; position:absolute; left: 42.5%; top: 52%; font-family: 'DM Sans'; font-size: 20px; background-color: #E3E0E0; color: #AAAAAA;  border-radius: 25px">  </p> 

	
	<input type="button" class="button custom-btn  " style="background-color: #6263D5; font-size: 34px; position:absolute; right:40%; bottom:30%;" value="Pagar" onclick="call_makePayment();">
	
</body>
	
	<script>
	
		postGuest_jsonPago = JSON.parse(localStorage.postGuest);
		
		console.log("Prueba pago ",postGuest_jsonPago);
		
		let response_gmail = fetchAsync_sendGmail()


		
		postGuest_jsonPago = JSON.parse(localStorage.postGuest);

		
		
		var totalmoney = document.getElementById('totalmoney');
		var pagado = document.getElementById('pagado');
		var deuda = document.getElementById('deuda');

		totalmoney.textContent = postGuest_jsonPago.total + " €";
		pagado.textContent += postGuest_jsonPago.paid + " €";
		deuda.textContent += postGuest_jsonPago.balance + " €";
		
		console.log("Pagado ",postGuest_jsonPago.paid);
		console.log("postGuest_jsonPago ",postGuest_jsonPago);

		var body = '{"reservationID": "","checkIn": "","checkOut": "","roomType": "","roomPrice": "","guestName": "","guestAddress": "","guestDocument": "","invoiceNumber": "","amount": "","cardType": "","cardNumber": "","cardCVV": "","cardExpire": ""}';
		
		body = JSON.parse(body);

		body.reservationID = postGuest_jsonPago.reservationID;
		body.checkIn = postGuest_jsonPago.startDate;
		body.checkOut = postGuest_jsonPago.endDate;
		body.roomType = postGuest_jsonPago.roomType;
		body.roomPrice = postGuest_jsonPago.roomPicked_price;
		body.guestName = postGuest_jsonPago.guestFirstName + " " + postGuest_jsonPago.guestLastName;
		body.guestDocument = postGuest_jsonPago.guestDocumentType;
		body.amount  = postGuest_jsonPago.balance;

		function call_makePayment(){ 
		//flag = makePayment(url, body);
		window.location.href='pago.html'
		}


	</script>
</html>
